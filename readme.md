# AI-Powered RFP Management System

A single-user web application that helps a procurement manager create RFPs from natural language, send them to vendors via email, automatically receive vendor responses, and use AI to parse and compare those proposals to recommend the best vendor.

This project is built with the MERN stack (MongoDB, Express, React, Node.js), Tailwind CSS for UI, and Google Gemini for AI features.

---

## 1. Features

- Create RFPs from natural language using AI (Gemini) and store them as structured objects
- Manage vendors (add, edit, delete, list)
- Send RFPs to selected vendors via email using SMTP (Gmail)
- Automatically receive vendor responses from your email inbox via IMAP, parse them with AI, and create proposals
- Compare multiple vendor proposals for an RFP with AI-generated scores and recommendations

---

## 2. Tech Stack

### Frontend

- React
- React Router
- Tailwind CSS
- lucide-react (icons)

### Backend

- Node.js
- Express.js
- MongoDB + Mongoose
- Nodemailer (SMTP email)
- IMAP (email receiving via `imap` and `mailparser` packages)
- Google Gemini API (@google/generative-ai)

### Database

- MongoDB (local or MongoDB Atlas)

### AI Provider

- Google Gemini 2.5 Flash (via `gemini-2.5-flash` model)

---

## 3. Project Structure

```
.
â”œâ”€â”€ backend/              # Node.js + Express + MongoDB API
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ db.js
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ rfpController.js
â”‚   â”‚   â”œâ”€â”€ vendorController.js
â”‚   â”‚   â””â”€â”€ proposalController.js
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ RFP.js
â”‚   â”‚   â”œâ”€â”€ Vendor.js
â”‚   â”‚   â””â”€â”€ Proposal.js
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ rfpRoutes.js
â”‚   â”‚   â”œâ”€â”€ vendorRoutes.js
â”‚   â”‚   â””â”€â”€ proposalRoutes.js
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ geminiService.js        # AI integration (RFP, proposals, comparison)
â”‚   â”‚   â”œâ”€â”€ emailService.js         # Email sending (SMTP)
â”‚   â”‚   â””â”€â”€ emailPollingService.js  # Email receiving (IMAP polling)
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ server.js
â”‚   â””â”€â”€ package.json
â””â”€â”€ frontend/             # React + Tailwind SPA
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”œâ”€â”€ Layout.jsx
    â”‚   â”‚   â”œâ”€â”€ Navbar.jsx
    â”‚   â”‚   â””â”€â”€ Sidebar.jsx
    â”‚   â”œâ”€â”€ pages/
    â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx
    â”‚   â”‚   â”œâ”€â”€ CreateRFP.jsx
    â”‚   â”‚   â”œâ”€â”€ RFPDetails.jsx
    â”‚   â”‚   â”œâ”€â”€ Vendors.jsx
    â”‚   â”‚   â”œâ”€â”€ SendRFP.jsx
    â”‚   â”‚   â”œâ”€â”€ SubmitProposal.jsx
    â”‚   â”‚   â””â”€â”€ ProposalsComparison.jsx
    â”‚   â”œâ”€â”€ App.jsx
    â”‚   â””â”€â”€ index.css
    â”œâ”€â”€ package.json
    â””â”€â”€ tailwind.config.js
```

---

## 4. Data Models

### 4.1 RFP (Request for Proposal)

Represents a procurement request.

```javascript
{
  title: String,              // e.g., "Laptops and Monitors"
  descriptionText: String,    // original user input
  budget: Number,             // e.g., 50000
  deliveryDeadline: Number,   // in days, e.g., 30
  paymentTerms: String,       // e.g., "Net-30"
  lineItems: [
    {
      itemType: String,       // e.g., "Laptop"
      quantity: Number,       // e.g., 20
      specs: String           // e.g., "16GB RAM, Intel i5"
    }
  ],
  status: String,             // "draft", "sent", "proposals_received"
  sentTo: [ObjectId],         // array of Vendor IDs
  createdAt: Date,
  updatedAt: Date
}
```

### 4.2 Vendor

Represents a supplier/vendor.

```javascript
{
  name: String,               // e.g., "Dell India"
  email: String,              // e.g., "sales@dell.com"
  phone: String,              // optional
  notes: String,              // optional
  createdAt: Date,
  updatedAt: Date
}
```

### 4.3 Proposal

Represents a vendor's proposal for an RFP.

```javascript
{
  rfpId: ObjectId,            // reference to RFP
  vendorId: ObjectId,         // reference to Vendor
  totalPrice: Number,         // e.g., 42000
  currency: String,           // default "USD"
  deliveryDays: Number,       // e.g., 25
  paymentTerms: String,       // e.g., "Net-30"
  warrantyMonths: Number,     // e.g., 24
  rawEmailBody: String,       // full vendor response text
  parsedDetailsJSON: Object,  // raw AI output
  aiScore: Number,            // 0-10, generated by AI
  aiSummary: String,          // AI reasoning for score
  createdAt: Date,
  updatedAt: Date
}
```

---

## 5. Prerequisites

Before running the project, ensure you have:

- Node.js (v18 or higher)
- npm or yarn
- MongoDB (local installation or MongoDB Atlas)
- Gmail account with:
  - 2FA enabled
  - App Password for SMTP/IMAP
  - IMAP enabled in Gmail settings
- Google Gemini API key (free from https://aistudio.google.com/app/apikey)

---

## 6. Installation and Setup

### 6.1 Clone the Repository

```bash
git git clone https://github.com/NirojShah/RPF.git
cd RPF
```

### 6.2 Backend Setup

```bash
cd backend
npm install
```

Create a `.env` file in the `backend` directory:

```env
# MongoDB Connection
MONGODB_URI=mongodb://localhost:27017/rfp-management

# Google Gemini API Key
GEMINI_API_KEY=your_gemini_api_key_here

# Email Configuration (Gmail + App Password)
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_16_character_app_password

# Server Port
PORT=5000
```

#### Enable Gmail IMAP

1. Go to Gmail settings â†’ "See all settings"
2. Open the "Forwarding and POP/IMAP" tab
3. Under "IMAP access" choose "Enable IMAP"
4. Save changes

#### Getting Gmail App Password

1. Go to Google Account settings
2. Enable 2-Step Verification
3. Go to Security > App passwords
4. Generate a new app password for "Mail"
5. Copy the 16-character password to EMAIL_PASSWORD in .env

#### Start the backend server

```bash
npm run dev
```

Backend runs on `http://localhost:5000`.

### 6.3 Frontend Setup

```bash
cd frontend
npm install
npm start
```

Frontend runs on `http://localhost:3000`.

---

## 7. API Documentation

Base URL: `http://localhost:5000/api`

### 7.1 RFP Endpoints

#### POST /api/rfp/generate

Generate a structured RFP from natural language using AI.

**Request:**
```json
{
  "text": "I need 20 laptops with 16GB RAM and 15 monitors 27-inch. Budget is $50,000. Delivery within 30 days. Payment terms net 30. We need at least 1 year warranty."
}
```

**Response:**
```json
{
  "title": "Laptops and Monitors",
  "budget": 50000,
  "deliveryDeadline": 30,
  "paymentTerms": "Net-30",
  "lineItems": [
    { "itemType": "Laptop", "quantity": 20, "specs": "16GB RAM" },
    { "itemType": "Monitor", "quantity": 15, "specs": "27-inch" }
  ],
  "descriptionText": "Original text..."
}
```

#### POST /api/rfp

Create and save a new RFP.

#### GET /api/rfp

List all RFPs (sorted by creation date).

#### GET /api/rfp/:id

Get a single RFP by ID.

#### POST /api/rfp/:id/send

Send RFP to selected vendors via email.

**Request:**
```json
{
  "vendorIds": ["vendorId1", "vendorId2"]
}
```

**Response:**
```json
{
  "message": "RFP sent successfully",
  "sentTo": 2
}
```

---

### 7.2 Vendor Endpoints

#### POST /api/vendors

Create a new vendor.

**Request:**
```json
{
  "name": "Dell India",
  "email": "sales@dell.com",
  "phone": "1234567890",
  "notes": "Preferred hardware vendor"
}
```

#### GET /api/vendors

List all vendors.

#### PUT /api/vendors/:id

Update a vendor.

#### DELETE /api/vendors/:id

Delete a vendor.

---

### 7.3 Proposal Endpoints

#### POST /api/proposals/receive

Simulate receiving and parsing a vendor proposal email (manual submission for demo).

**Request:**
```json
{
  "rfpId": "rfpId123",
  "vendorId": "vendorId456",
  "emailBody": "Dear Team, Total Price: $42,000. Delivery: 25 days. Warranty: 2 years. Payment: Net-30."
}
```

#### GET /api/proposals/rfp/:id

Get all proposals for an RFP with AI comparison and scoring.

**Response:**
```json
{
  "proposals": [
    {
      "_id": "proposalId",
      "vendorId": {
        "name": "Dell India",
        "email": "sales@dell.com"
      },
      "totalPrice": 42000,
      "deliveryDays": 25,
      "warrantyMonths": 24,
      "paymentTerms": "Net-30",
      "aiScore": 8.5,
      "aiSummary": "Competitive price, meets deadline, strong warranty"
    }
  ],
  "recommendation": "Dell India is recommended due to balanced price, delivery, and warranty coverage."
}
```

---

## 8. AI Integration (Gemini)

### 8.1 Configuration

- Library: @google/generative-ai
- Model: gemini-2.5-flash
- API Key: Free tier from Google AI Studio

### 8.2 Use Cases

#### RFP Generation
- Input: Natural language procurement needs
- Process: AI extracts budget, delivery, items, payment terms
- Output: Structured JSON matching RFP schema

#### Proposal Parsing
- Input: RFP context + unstructured email body
- Process: AI extracts price, delivery, warranty, terms
- Output: Structured proposal data
- Implementation: Regex-based JSON extraction handles markdown formatting

#### Proposal Comparison
- Input: RFP requirements + all vendor proposals
- Process: AI evaluates each on price, delivery, warranty, terms
- Output: Score (0-10) + reasoning per vendor + overall recommendation

---

## 9. Email Integration

### 9.1 Sending Emails (SMTP)

- Uses Nodemailer with Gmail SMTP
- Configuration via EMAIL_USER and EMAIL_PASSWORD
- Email format includes:
  - RFP title and ID in subject line
  - Budget, deadline, payment terms
  - All line items with specifications
  - Instructions for vendor response

**Subject format:**
```
RFP: Procurement of Laptops and External Monitors - ID: <RFP_ID>
```

### 9.2 Receiving Emails (IMAP Polling)

**Implementation:**
- Service: emailPollingService.js
- Protocol: IMAP (imap.gmail.com:993 with TLS)
- Polling interval: Every 30 seconds
- Libraries: `imap` for connection, `mailparser` for parsing

**Workflow:**
1. Connect to Gmail IMAP
2. Search for recent emails (last 24 hours)
3. For each email:
   - Extract sender email address
   - Fetch all vendors from database dynamically
   - Verify sender is a registered vendor
   - Extract RFP ID from subject using regex
   - Load corresponding RFP from database
   - Parse email body with Gemini AI
   - Create Proposal document with parsed data
   - Update RFP status to "proposals_received"
   - Mark email as read

**Key Feature: Dynamic Vendor Verification**
- No hardcoded email addresses
- Fetches all vendors from Vendor collection in real-time
- Any vendor added through UI is automatically recognized
- Scalable solution for production use

---

## 10. Usage Flow

### Step 1: Add Vendors

1. Navigate to "Vendors" page
2. Click "Add Vendor"
3. Enter vendor details:
   - Name: Dell India
   - Email: youremail+dell@gmail.com (for demo)
   - Phone: Optional
   - Notes: Optional
4. Add 2-3 vendors for comparison

**Tip:** Use Gmail's + addressing (youremail+vendor@gmail.com) to simulate multiple vendors with one inbox.

### Step 2: Create RFP with AI

1. Go to "Create RFP"
2. Type natural language description:

```
I need to procure 25 laptops with 16GB RAM and Intel i7 processor for our development team, and 20 external monitors that are 27 inches with 4K resolution. My total budget is 60000 dollars. I need delivery within 45 days. Payment terms should be net 30 days and I need at least 2 years warranty on all items.
```

3. Click "Generate RFP with AI"
4. Review generated structure
5. Click "Save RFP"

### Step 3: Send RFP to Vendors

1. From Dashboard, view the RFP
2. Click "Send to Vendors"
3. Select 2-3 vendors
4. Click "Send RFP via Email"
5. Real emails sent via SMTP

### Step 4: Vendors Reply via Email

Vendors receive email and reply. For demo:

**Sample Reply (Dell):**
```
Dear Procurement Team,

Thank you for considering Dell India.

Total Price: $52,000
Delivery Timeline: 35 days
Warranty Period: 3 years
Payment Terms: Net-30 days

We can provide Dell Latitude laptops and UltraSharp monitors meeting all specifications.

Best regards,
Dell India Sales Team
```

### Step 5: Automatic Email Processing

- Backend polls inbox every 30 seconds
- Detects vendor replies automatically
- Verifies sender is registered vendor
- Extracts RFP ID from subject
- Parses email with AI
- Creates proposal in database
- No manual data entry required

**Console output:**
```
ðŸ“§ Found 1 new email(s)
ðŸ“¬ Processing email from: Dell India
ðŸ“‹ Valid vendor emails in database: [...]
Found RFP ID: 69354f98...
ðŸ¤– Parsing with AI...
âœ… Proposal created successfully for vendor: Dell India
```

### Step 6: Compare Proposals with AI

1. Go to Dashboard
2. Click "Compare" on RFP
3. View:
   - AI Recommendation (top card)
   - Comparison table with all vendors
   - AI scores (0-10) per vendor
   - Detailed reasoning per vendor

**Example Output:**
- Dell: 8.5/10 - "Competitive price, meets deadline, excellent 3-year warranty"
- Lenovo: 9.0/10 - "Best price while meeting all requirements"

---

## 11. Decisions & Assumptions

### Key Design Decisions

- **Single-user system:** No authentication (per assignment requirement)
- **MongoDB schema:** Simple but extensible models
- **AI integration:** Used for RFP generation, proposal parsing, and comparison
- **Email receiving:** IMAP polling for simplicity and local testing
- **Dynamic vendor validation:** Fetches from database instead of hardcoding
- **Regex-based JSON extraction:** Handles AI markdown formatting robustly

### Assumptions

- Vendors respond in English with structured information
- All proposals use USD currency
- Subject line format is preserved (contains RFP ID)
- Gmail IMAP/SMTP are accessible (not blocked by firewall)
- Polling interval of 30 seconds is acceptable for demo
- Email attachments are not required for MVP

---

## 12. AI Tools Used During Development

### Tools Used

- ChatGPT / Perplexity AI
- GitHub Copilot
- Cursor AI

### How They Helped

**Code Generation:**
- React component boilerplate
- Express route structure
- Mongoose schemas
- Tailwind CSS layouts

**Debugging:**
- IMAP connection issues
- JSON parsing errors from AI responses
- MongoDB query optimization
- Email regex pattern matching

**Prompt Engineering:**
- Crafting Gemini prompts for structured output
- Handling markdown code blocks in AI responses
- Scoring logic for proposal comparison

**Documentation:**
- README structure
- API documentation format
- Setup instructions

### Key Learnings

- Importance of robust JSON extraction from LLM outputs
- IMAP polling considerations for production
- Email subject line as correlation mechanism
- Dynamic database queries vs hardcoded values
- Error handling for unreliable network connections

---

## 13. Demo Video

**Duration:** 5-10 minutes

**Content Covered:**

1. **RFP Creation (2 min)**
   - Natural language input
   - AI generates structured RFP
   - Save to database

2. **Vendor Management & Email Sending (1 min)**
   - Show vendor list
   - Send RFP to multiple vendors
   - Show actual emails in inbox

3. **Automatic Proposal Receiving (2 min)**
   - Vendor replies via email
   - Backend console shows automatic detection
   - AI parsing in action
   - Proposal created in database

4. **AI Comparison (2 min)**
   - Comparison page with all proposals
   - AI scores and reasoning
   - Recommendation explanation

5. **Code Walkthrough (2-3 min)**
   - Project structure
   - geminiService.js (AI integration)
   - emailPollingService.js (IMAP automation)
   - Key design decisions

---

## 14. Environment Variables

**backend/.env:**

```env
# MongoDB Connection
MONGODB_URI=mongodb://localhost:27017/rfp-management

# Google Gemini API Key
# Get from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# Email Configuration (Gmail)
# Use App Password: https://myaccount.google.com/apppasswords
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_16_char_app_password

# Server Port
PORT=5000
```

**backend/.env.example** is included in the repository with placeholder values.

---

## 15. Troubleshooting

### IMAP Connection Issues

**Problem:** "IMAP error: Timed out"

**Solutions:**
- Verify IMAP is enabled in Gmail settings
- Check App Password is correct
- Ensure port 993 is not blocked by firewall
- Increase `connTimeout` in emailPollingService.js

### AI Parsing Errors

**Problem:** "Unexpected token" or "not valid JSON"

**Solution:** The code uses regex extraction to handle markdown. If issues persist:
```javascript
const jsonMatch = responseText.match(/\{[\s\S]*\}/);
```

### Email Not Detected

**Problem:** "No new vendor emails found"

**Solutions:**
- Email must be UNREAD (mark as unread in Gmail)
- Subject must contain RFP ID
- Sender must be registered vendor in database
- Wait for 30-second polling interval or trigger manually: `http://localhost:5000/api/test/check-emails`

### MongoDB Connection Failed

**Solutions:**
- Ensure MongoDB is running: `mongod`
- Check MONGODB_URI in .env
- For Atlas: whitelist your IP address

---

## 16. Known Limitations

- IMAP polling is not optimized for high-volume scenarios
- No support for email attachments (PDFs, Excel)
- Simple scoring algorithm without custom weights
- Single mailbox for both sending and receiving
- No real-time notifications (30-second polling delay)
- Basic error handling for network failures

---

## 17. Future Enhancements

- Replace IMAP polling with email webhooks (SendGrid, Mailgun)
- Add PDF/Excel attachment parsing
- Implement configurable scoring weights per criterion
- Add real-time WebSocket notifications for new proposals
- Multi-user authentication and role-based access
- RFP templates and version control
- Vendor performance history tracking
- Advanced analytics and reporting dashboard

---

## 18. Submission

**Deliverables:**

1. GitHub Repository: [Your GitHub URL]
2. Demo Video: [Your Loom/YouTube/Google Drive URL]
3. This README with setup instructions

**What Reviewers Will See:**

- Complete MERN stack implementation
- Real AI integration with Gemini
- Automatic email sending and receiving
- End-to-end RFP management workflow
- Clean code structure and documentation

---

## 19. Contact

For questions about this project:

- GitHub: https://www.github.com/NirojShah
- Email: nirojshah1998@gmail.com
- LinkedIn: https://www.linkedin.com/in/nirojshah

---

## 20. License

This project was created as part of an SDE assignment. All rights reserved.

---

**End of README**
